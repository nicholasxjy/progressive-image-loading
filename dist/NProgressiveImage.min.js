!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.NProgressiveImage=e():t.NProgressiveImage=e()}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=7)}([function(t,e,n){(function(e){var n="Expected a function",r=NaN,i="[object Symbol]",o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt,l="object"==typeof e&&e&&e.Object===Object&&e,f="object"==typeof self&&self&&self.Object===Object&&self,d=l||f||Function("return this")(),p=Object.prototype.toString,h=Math.max,v=Math.min,m=function(){return d.Date.now()};function b(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function g(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&p.call(t)==i}(t))return r;if(b(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=b(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var n=s.test(t);return n||c.test(t)?u(t.slice(2),n?2:8):a.test(t)?r:+t}t.exports=function(t,e,r){var i,o,a,s,c,u,l=0,f=!1,d=!1,p=!0;if("function"!=typeof t)throw new TypeError(n);function y(e){var n=i,r=o;return i=o=void 0,l=e,s=t.apply(r,n)}function w(t){var n=t-u;return void 0===u||n>=e||n<0||d&&t-l>=a}function x(){var t=m();if(w(t))return j(t);c=setTimeout(x,function(t){var n=e-(t-u);return d?v(n,a-(t-l)):n}(t))}function j(t){return c=void 0,p&&i?y(t):(i=o=void 0,s)}function I(){var t=m(),n=w(t);if(i=arguments,o=this,u=t,n){if(void 0===c)return function(t){return l=t,c=setTimeout(x,e),f?y(t):s}(u);if(d)return c=setTimeout(x,e),y(u)}return void 0===c&&(c=setTimeout(x,e)),s}return e=g(e)||0,b(r)&&(f=!!r.leading,a=(d="maxWait"in r)?h(g(r.maxWait)||0,e):a,p="trailing"in r?!!r.trailing:p),I.cancel=function(){void 0!==c&&clearTimeout(c),l=0,i=u=o=c=void 0},I.flush=function(){return void 0===c?s:j(m())},I}}).call(this,n(1))},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(3);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(5)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(4)(!1)).push([t.i,".nprogressive-image-item {\n  position: relative;\n  z-index: 10;\n}\n\n.nprogressive-image {\n  display: none;\n}\n\n.nprogressive-image-item > canvas {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 11;\n  visibility: visible;\n  opacity: 1;\n  -webkit-transition: all 0.1s ease 0.4s;\n  transition: all 0.1s ease 0.4s;\n}\n.nprogressive-source-image {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 12;\n  visibility: hidden;\n  opacity: 0;\n  -webkit-transition: all 0.4s ease;\n  transition: all 0.4s ease;\n}\n.nprogressive-image-item.is--loaded .nprogressive-source-image {\n  visibility: visible;\n  opacity: 1;\n}\n.nprogressive-image-item.is--loaded > canvas {\n  visibility: hidden;\n  opacity: 0;\n}\n",""])},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var i=function(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}(r),o=r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"});return[n].concat(o).concat([i]).join("\n")}return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<t.length;i++){var a=t[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(t,e,n){var r={},i=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}}(function(){return window&&document&&document.all&&!window.atob}),o=function(t){var e={};return function(t,n){if("function"==typeof t)return t();if(void 0===e[t]){var r=function(t,e){return e?e.querySelector(t):document.querySelector(t)}.call(this,t,n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}e[t]=r}return e[t]}}(),a=null,s=0,c=[],u=n(6);function l(t,e){for(var n=0;n<t.length;n++){var i=t[n],o=r[i.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](i.parts[a]);for(;a<i.parts.length;a++)o.parts.push(m(i.parts[a],e))}else{var s=[];for(a=0;a<i.parts.length;a++)s.push(m(i.parts[a],e));r[i.id]={id:i.id,refs:1,parts:s}}}}function f(t,e){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i],a=e.base?o[0]+e.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function d(t,e){var n=o(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=c[c.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),c.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=o(t.insertAt.before,n);n.insertBefore(e,i)}}function p(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=c.indexOf(t);e>=0&&c.splice(e,1)}function h(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var r=function(){0;return n.nc}();r&&(t.attrs.nonce=r)}return v(e,t.attrs),d(t,e),e}function v(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function m(t,e){var n,r,i,o;if(e.transform&&t.css){if(!(o=e.transform(t.css)))return function(){};t.css=o}if(e.singleton){var c=s++;n=a||(a=h(e)),r=g.bind(null,n,c,!1),i=g.bind(null,n,c,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",v(e,t.attrs),d(t,e),e}(e),r=function(t,e,n){var r=n.css,i=n.sourceMap,o=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||o)&&(r=u(r));i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,e),i=function(){p(n),n.href&&URL.revokeObjectURL(n.href)}):(n=h(e),r=function(t,e){var n=e.css,r=e.media;r&&t.setAttribute("media",r);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){p(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=i()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=f(t,e);return l(n,e),function(t){for(var i=[],o=0;o<n.length;o++){var a=n[o];(s=r[a.id]).refs--,i.push(s)}t&&l(f(t,e),e);for(o=0;o<i.length;o++){var s;if(0===(s=i[o]).refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete r[s.id]}}}};var b=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}();function g(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=b(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var i,o=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?t:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(t,e,n){"use strict";n.r(e);var r=n(0),i=n.n(r);function o(t,e,n,r,i,o){var a=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],s=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];"string"==typeof t&&(t=document.getElementById(t)),"string"==typeof e&&(e=document.getElementById(e)),i=i||10,e.width=n,e.height=r;var c=e.getContext("2d");if(c.clearRect(0,0,n,r),c.drawImage(t,0,0),!(isNaN(i)||i<1)){var u=function(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};!function(t,e,n,r,i,o,c){var l;o|=0;try{l=t.getImageData(e,n,r,i)}catch(t){throw new Error("unable to access image data: "+t)}var f,d,p,h,v,m,b,g,y,w,x,j,I,E,O,L,S,R,T,C,U,A,k,M,N,B=l.data,z=o+o+1,D=r-1,P=i-1,$=o+1,q=$*($+1)/2,_=new u,F=_;for(p=1;p<z;p++)F=F.next=new u,p==$&&(N=F);F.next=_;var H=null,W=null;b=m=0;var J=a[o],G=s[o];for(d=0;d<i;d++){for(L=S=R=T=g=y=w=x=0,j=$*(C=B[m]),I=$*(U=B[m+1]),E=$*(A=B[m+2]),c&&(O=$*(k=B[m+3])),g+=q*C,y+=q*U,w+=q*A,c&&(x+=q*k),F=_,p=0;p<$;p++)F.r=C,F.g=U,F.b=A,c&&(F.a=k),F=F.next;for(p=1;p<$;p++)h=m+((D<p?D:p)<<2),g+=(F.r=C=B[h])*(M=$-p),y+=(F.g=U=B[h+1])*M,w+=(F.b=A=B[h+2])*M,c&&(x+=(F.a=k=B[h+3])*M),L+=C,S+=U,R+=A,c&&(T+=k),F=F.next;for(H=_,W=N,f=0;f<r;f++)c?(B[m+3]=k=x*J>>G,0!=k?(k=255/k,B[m]=(g*J>>G)*k,B[m+1]=(y*J>>G)*k,B[m+2]=(w*J>>G)*k):B[m]=B[m+1]=B[m+2]=0):(B[m]=g*J>>G,B[m+1]=y*J>>G,B[m+2]=w*J>>G),g-=j,y-=I,w-=E,c&&(x-=O),j-=H.r,I-=H.g,E-=H.b,c&&(O-=H.a),h=b+((h=f+o+1)<D?h:D)<<2,L+=H.r=B[h],S+=H.g=B[h+1],R+=H.b=B[h+2],c&&(T+=H.a=B[h+3]),g+=L,y+=S,w+=R,c&&(x+=T),H=H.next,j+=C=W.r,I+=U=W.g,E+=A=W.b,c&&(O+=k=W.a),L-=C,S-=U,R-=A,c&&(T-=k),W=W.next,m+=4;b+=r}for(f=0;f<r;f++){for(S=R=T=L=y=w=x=g=0,j=$*(C=B[m=f<<2]),I=$*(U=B[m+1]),E=$*(A=B[m+2]),c&&(O=$*(k=B[m+3])),g+=q*C,y+=q*U,w+=q*A,c&&(x+=q*k),F=_,p=0;p<$;p++)F.r=C,F.g=U,F.b=A,c&&(F.a=k),F=F.next;for(v=r,p=1;p<=o;p++)m=v+f<<2,g+=(F.r=C=B[m])*(M=$-p),y+=(F.g=U=B[m+1])*M,w+=(F.b=A=B[m+2])*M,c&&(x+=(F.a=k=B[m+3])*M),L+=C,S+=U,R+=A,c&&(T+=k),F=F.next,p<P&&(v+=r);for(m=f,H=_,W=N,d=0;d<i;d++)h=m<<2,c?(B[h+3]=k=x*J>>G,k>0?(k=255/k,B[h]=(g*J>>G)*k,B[h+1]=(y*J>>G)*k,B[h+2]=(w*J>>G)*k):B[h]=B[h+1]=B[h+2]=0):(B[h]=g*J>>G,B[h+1]=y*J>>G,B[h+2]=w*J>>G),g-=j,y-=I,w-=E,c&&(x-=O),j-=H.r,I-=H.g,E-=H.b,c&&(O-=H.a),h=f+((h=d+$)<P?h:P)*r<<2,g+=L+=H.r=B[h],y+=S+=H.g=B[h+1],w+=R+=H.b=B[h+2],c&&(x+=T+=H.a=B[h+3]),H=H.next,j+=C=W.r,I+=U=W.g,E+=A=W.b,c&&(O+=k=W.a),L-=C,S-=U,R-=A,c&&(T-=k),W=W.next,m+=r}t.putImageData(l,e,n)}(c,0,0,n,r,i,o)}}n(2);function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s={container:"",items:"",offsetTop:10,blurRadius:10};function c(t){var e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}var u=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e.container)throw new Error("container need to be set!");"string"==typeof e.container?this.container=document.querySelector(e.container):this.container=e.container,e.items&&Array.isArray(e.items)?this.items=e.items:e.items&&"string"==typeof e.items?this.items=this.container.querySelectorAll(e.items):this.items=this.container.querySelectorAll("img"),this.option=Object.assign({},s,e),this.handleScroll=this.handleScroll.bind(this),this.handleResize=this.handleResize.bind(this),this.init(),this.attachEvents(),this.loadItems()}return function(t,e,n){e&&a(t.prototype,e),n&&a(t,n)}(t,[{key:"init",value:function(){for(var t=[],e=this.container.getBoundingClientRect(),n=this.items.length,r=0;r<n;r++){var i=this.items[r],a=this.createItemTemplate(i),s=this.setDimension(a,i,e.width),c=s.w,u=s.h;o(i,a.canvas,parseInt(c/10),parseInt(u/10),this.option.blurRadius),t.push({el:a.div,src:i.getAttribute("data-src"),isLoaded:!1,isError:!1})}this.items=t}},{key:"createItemTemplate",value:function(t){var e=document.createElement("div");e.classList.add("nprogressive-image-item");var n=document.createElement("canvas");return t.parentNode.replaceChild(e,t),e.appendChild(t),e.appendChild(n),{div:e,canvas:n}}},{key:"setDimension",value:function(t,e,n){var r=parseInt(e.getAttribute("data-width"),10)||0,i=parseInt(e.getAttribute("data-height"),10)||0,o=r,a=i;return r>=n&&(o=n,a=parseInt(i*o/r)),t.div.style.width=o+"px",t.div.style.height=a+"px",t.canvas.width=parseInt(o/10),t.canvas.height=parseInt(a/10),{w:o,h:a}}},{key:"attachEvents",value:function(){window.addEventListener("scroll",this.handleScroll,!1),window.addEventListener("resize",this.handleResize,!1)}},{key:"handleScroll",value:function(){this.loadItems()}},{key:"handleResize",value:function(){this.loadItems()}},{key:"loadItems",value:function(){for(var t=this.items,e=0,n=t.length;e<n;e++)t[e].isLoaded||t[e].isError||c(t[e].el)&&this.loadImage(t[e])}},{key:"loadImage",value:function(t){t.el.classList.add("is--loading");var e=new Image;e.onload=function(){e.classList.add("nprogressive-source-image"),t.isLoaded=!0,t.el.appendChild(e),t.el.classList.add("is--loaded")},e.onerror=function(){t.isError=!0},e.src=t.src}},{key:"destroy",value:function(){window.addEventListener("scroll",i()(this.handleScroll,250),!1),window.addEventListener("resize",i()(this.handleResize,250),!1)}}]),t}();e.default=u}]).default});